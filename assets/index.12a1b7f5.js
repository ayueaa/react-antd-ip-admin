import{g as _,o as D,r as s,w as x,e as F,p as H,c as g,C as R,u as P,d as S,s as V,i as G}from"./index.db5181c7.js";import{a as M,i as J}from"./useSize.70a35bba.js";import{c as K}from"./reactNode.265b0311.js";const Q=e=>{const{componentCls:t,colorPrimary:o}=e;return{[t]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${o})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${e.motionEaseOutCirc}`,`opacity 2s ${e.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:[`box-shadow 0.3s ${e.motionEaseInOut}`,`opacity 0.35s ${e.motionEaseInOut}`].join(",")}}}}};var U=_("Wave",e=>[Q(e)]);function X(e){const t=(e||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return t&&t[1]&&t[2]&&t[3]?!(t[1]===t[2]&&t[2]===t[3]):!0}function C(e){return e&&e!=="#fff"&&e!=="#ffffff"&&e!=="rgb(255, 255, 255)"&&e!=="rgba(255, 255, 255, 1)"&&X(e)&&!/rgba\((?:\d*, ){3}0\)/.test(e)&&e!=="transparent"}function Y(e){const{borderTopColor:t,borderColor:o,backgroundColor:r}=getComputedStyle(e);return C(t)?t:C(o)?o:C(r)?r:null}const W="ant-wave-target";function w(e){return Number.isNaN(e)?0:e}const Z=e=>{const{className:t,target:o,component:r}=e,i=s.exports.useRef(null),[u,d]=s.exports.useState(null),[f,h]=s.exports.useState([]),[l,n]=s.exports.useState(0),[p,v]=s.exports.useState(0),[N,T]=s.exports.useState(0),[k,L]=s.exports.useState(0),[$,O]=s.exports.useState(!1),y={left:l,top:p,width:N,height:k,borderRadius:f.map(c=>`${c}px`).join(" ")};u&&(y["--wave-color"]=u);function E(){const c=getComputedStyle(o);d(Y(o));const a=c.position==="static",{borderLeftWidth:b,borderTopWidth:m}=c;n(a?o.offsetLeft:w(-parseFloat(b))),v(a?o.offsetTop:w(-parseFloat(m))),T(o.offsetWidth),L(o.offsetHeight);const{borderTopLeftRadius:I,borderTopRightRadius:j,borderBottomLeftRadius:q,borderBottomRightRadius:z}=c;h([I,j,z,q].map(B=>w(parseFloat(B))))}if(s.exports.useEffect(()=>{if(o){const c=x(()=>{E(),O(!0)});let a;return typeof ResizeObserver!="undefined"&&(a=new ResizeObserver(E),a.observe(o)),()=>{x.cancel(c),a==null||a.disconnect()}}},[]),!$)return null;const A=(r==="Checkbox"||r==="Radio")&&(o==null?void 0:o.classList.contains(W));return s.exports.createElement(F,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(c,a)=>{var b;if(a.deadline||a.propertyName==="opacity"){const m=(b=i.current)===null||b===void 0?void 0:b.parentElement;H(m).then(()=>{m==null||m.remove()})}return!1}},c=>{let{className:a}=c;return s.exports.createElement("div",{ref:i,className:g(t,{"wave-quick":A},a),style:y})})},ee=(e,t)=>{var o;const{component:r}=t;if(r==="Checkbox"&&!(!((o=e.querySelector("input"))===null||o===void 0)&&o.checked))return;const i=document.createElement("div");i.style.position="absolute",i.style.left="0px",i.style.top="0px",e==null||e.insertBefore(i,e==null?void 0:e.firstChild),D(s.exports.createElement(Z,Object.assign({},t,{target:e})),i)};var te=ee;function oe(e,t,o){const{wave:r}=s.exports.useContext(R),[,i,u]=P(),d=M(l=>{const n=e.current;if((r==null?void 0:r.disabled)||!n)return;const p=n.querySelector(`.${W}`)||n,{showEffect:v}=r||{};(v||te)(p,{className:t,token:i,component:o,event:l,hashId:u})}),f=s.exports.useRef();return l=>{x.cancel(f.current),f.current=x(()=>{d(l)})}}const se=e=>{const{children:t,disabled:o,component:r}=e,{getPrefixCls:i}=s.exports.useContext(R),u=s.exports.useRef(null),d=i("wave"),[,f]=U(d),h=oe(u,g(d,f),r);if(S.useEffect(()=>{const n=u.current;if(!n||n.nodeType!==1||o)return;const p=v=>{!J(v.target)||!n.getAttribute||n.getAttribute("disabled")||n.disabled||n.className.includes("disabled")||n.className.includes("-leave")||h(v)};return n.addEventListener("click",p,!0),()=>{n.removeEventListener("click",p,!0)}},[o]),!S.isValidElement(t))return t!=null?t:null;const l=V(t)?G(t.ref,u):u;return K(t,{ref:l})};var ie=se;export{W as T,ie as W};
