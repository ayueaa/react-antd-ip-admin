import{r as o,e as k,_ as I,u as w,b as d,j as t,P as y,aZ as z,aW as u,S as p,b3 as A,b4 as O,M as S,s as m,aA as _}from"./index.cca6eaae.js";import{a as b,b as B}from"./document.89cc7ac5.js";import{E as $}from"./EditOutlined.018c6d1f.js";var M={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},T=M,H=function(s,n){return o.exports.createElement(k,I({},s,{ref:n,icon:T}))},P=o.exports.forwardRef(H);const R=()=>{const[i,s]=o.exports.useState([]),[n,h]=o.exports.useState({page:1,page_size:10}),[g,x]=o.exports.useState(0),c=w();o.exports.useEffect(()=>{l()},[n]);const l=async()=>{const{status:e,result:a}=await b(n);e&&(s(a.items),x(a.total))},D=()=>{c("/document/new")},v=e=>{c(`/document/edit/${e}`)},f=e=>{c(`/document/${e}`)},C=e=>{S.confirm({title:"\u786E\u8BA4\u5220\u9664\u8FD9\u7BC7\u6587\u7AE0\u5417\uFF1F",content:"\u4E00\u65E6\u5220\u9664\uFF0C\u5C06\u65E0\u6CD5\u6062\u590D\u3002",okText:"\u786E\u8BA4",okType:"danger",cancelText:"\u53D6\u6D88",onOk:async()=>{const{status:a}=await B(e);a?(m.success("\u5220\u9664\u6210\u529F"),await l()):m.error("\u5220\u9664\u5931\u8D25")},onCancel(){console.log("\u53D6\u6D88\u5220\u9664")}})},r=({icon:e,item:a,onClick:E,text:F})=>t(p,{children:d("a",{onClick:()=>E(a.doc_id),children:[_.createElement(e),F]})});return d(z,{children:[t(u,{itemLayout:"vertical",size:"large",dataSource:i,renderItem:e=>t(u.Item,{actions:[t(r,{icon:$,item:e,onClick:v,text:"\u7F16\u8F91"}),t(r,{icon:P,item:e,onClick:C,text:"\u5220\u9664"}),t(p,{children:`${e.updated_at}`})],children:t(u.Item.Meta,{title:t("a",{onClick:()=>f(e.doc_id),children:e.title}),description:`${e.content} ...`})},e.title)}),t(y,{current:n.page,pageSize:n.page_size,total:g,onChange:(e,a)=>h({page:e,page_size:a}),style:{textAlign:"center",marginTop:"20px"}}),t(O,{icon:t(A,{}),type:"primary",shape:"circle",tooltip:"\u65B0\u5EFA\u6587\u6863",style:{position:"fixed",right:"24px",bottom:"24px",zIndex:1e3},onClick:D})]})};export{R as default};
